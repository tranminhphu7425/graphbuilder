import{r as p,j as e,L as i}from"./index-JkP5DFv-.js";import{v as j,u as A,e as R}from"./extendable-Bkc2CH56.js";import{C as G}from"./configfullpage-C1ZGp0AV.js";import{i as H,L as O}from"./style-D1tASwXO.js";import{N as L}from"./nhapdothi-Cuzztn2Y.js";const q=(w,C)=>{p.useEffect(()=>{let x=null,f=new j.DataSet,b=new j.DataSet;const y=document.getElementById("nodes").value,N=document.getElementById("edges").value,g=parseInt(y)||0,I=N?N.split(`
`):[],z=f.getIds();for(let r=1;r<=g;r++)z.includes(r)||f.add({id:r,label:r.toString(),size:40,font:{size:40,vadjust:-80}});b.clear();const k={};I.forEach(r=>{const o=r.split(" "),t=parseInt(o[0]),a=parseInt(o[1]),l=o.length===3?o[2]:null;if(!isNaN(t)&&!isNaN(a)){const d=t===a;if(d){k[t]=(k[t]||0)+1;const s=k[t];if(s>=6&&t<=g){const m=35+(s-5)*5,S=40+(s-5)*5,c=-80-(s-5)*10;f.update({id:t,size:m,font:{size:S,vadjust:c}})}}const h=Math.random()>.5?"curvedCCW":"curvedCW",v=Math.random()*.5+.2,n={from:t,to:a,arrows:"to",smooth:d?{type:h,roundness:v}:!0,selfReferenceSize:d?20+(k[t]-1)*10:void 0};l!==null&&(n.label=l.toString(),n.font={size:30,align:"horizontal"},n.color={color:"#373b37"}),b.add(n)}}),z.forEach(r=>{if(r>g)try{f.remove({id:r})}catch(o){console.error(`Error removing node ${r}:`,o)}});class B{constructor(o){this.V=o+1,this.adj=new Map;for(let t=1;t<=o;t++)this.adj.set(t,[])}addEdge(o,t){this.adj.get(o).push(t)}tarjan(){const o=new Array(this.V).fill(-1),t=new Array(this.V).fill(-1),a=new Array(this.V).fill(!1),l=[],d=[];let h=0;const v=n=>{o[n]=h,t[n]=h,h++,l.push(n),a[n]=!0;for(const s of this.adj.get(n))o[s]===-1?(v(s),t[n]=Math.min(t[n],t[s])):a[s]&&(t[n]=Math.min(t[n],o[s]));if(t[n]===o[n]){const s=[];let m;do m=l.pop(),a[m]=!1,s.push(m);while(m!==n);d.push(s)}};for(let n=1;n<this.V;n++)o[n]===-1&&v(n);return d}}function D(r,o,t=!0){const a=new j.DataSet,l=new j.DataSet,d={},h=["#ffa500","#ff7f50","#6495ed","#ff69b4","#bdd482"];r.forEach((m,S)=>{m.forEach(c=>{a.add({id:c,label:c.toString(),color:h[(S-1)%h.length],size:40,font:{color:"#000000",size:40,vadjust:-80}})}),m.forEach(c=>{o.forEach(u=>{if(u.from===c&&m.includes(u.to))if(u.from===u.to){d[c]=(d[c]||0)+1;const E=d[c];if(E>=6){const F=40+(E-5)*5,M=40+(E-5)*5,W=-80-(E-5)*10;a.update({id:c,size:F,font:{size:M,vadjust:W}})}const T=Math.random()>.5?"curvedCCW":"curvedCW",V=Math.random()*.5+.2;l.add({from:u.from,to:u.to,arrows:t?"to":"",smooth:{type:T,roundness:V},selfReferenceSize:20+(d[c]-1)*10})}else l.add(u)})})});const v=document.getElementById("mynetwork"),n={nodes:a,edges:l},s={configure:{enabled:!1},nodes:{shape:"dot",color:"#bdd482",margin:10},edges:{smooth:{type:"dynamic",roundness:.5},selfReferenceSize:20},interaction:{dragNodes:!0,hover:!0},physics:{enabled:!0,solver:"forceAtlas2Based",forceAtlas2Based:{springLength:150,springConstant:.02,centralGravity:.005,gravitationalConstant:-80},stabilization:{iterations:200},wind:{x:0,y:0}}};x=new j.Network(v,n,s)}document.getElementById("run").addEventListener("click",()=>{const r=document.getElementById("nodes").value,o=document.getElementById("edges").value.trim().split(`
`),t=new B(parseInt(r));o.forEach(l=>{const[d,h]=l.split(" ").map(Number);t.addEdge(d,h)});const a=t.tarjan();D(a,b)}),document.getElementById("zoomExtendsButton").addEventListener("click",function(){x.fit()})},[w,C])},U=()=>{const[w,C]=p.useState(""),[x,f]=p.useState("");var[b,y]=p.useState(0);p.useEffect(()=>{A(),G(),H()},[]),p.useEffect(()=>{L()},[]),p.useEffect(()=>{b===1&&(L(),y(0))},[w,x,b]);const N=g=>{g.preventDefault(),y(1)};return q(w,x),e.jsxs(e.Fragment,{children:[e.jsx("title",{children:"Tìm liên thông mạnh"}),e.jsxs("div",{className:"fade-in",children:[e.jsx("header",{children:e.jsx("nav",{className:" border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between mx-auto p-4 gap-[20px]",children:[e.jsx(O,{}),e.jsx("div",{className:"hidden w-full md:block md:w-auto",id:"navbar-dropdown",children:e.jsxs("ul",{className:`flex flex-col font-medium \r
      p-4 md:p-0 mt-0 border border-gray-100 rounded-lg\r
      md:space-x-8 rtl:space-x-reverse \r
      md:flex-row md:mt-0 md:border-0 border-gray-700\r
      transparentColor main-nav`,children:[e.jsx("li",{children:e.jsx(i,{to:"/",className:`block py-2 px-3 \r
          rounded-sm md:border-0 md:p-0 text-white hover:bg-gray-700 md:hover:bg-transparent font-bold navigation`,"aria-current":"page",children:"Trang chủ"})}),e.jsxs("li",{children:[e.jsxs("button",{id:"dropdownNavbarLink1","data-dropdown-toggle":"dropdownNavbar1",className:`flex items-center justify-between w-full py-2 px-3 \r
          rounded-sm md:hover:bg-transparent \r
          md:border-0 md:p-0 md:w-auto \r
          focus:text-white border-gray-700 md:bg-transparent \r
          font-bold navigation text-white hover:bg-gray-700`,children:["Tạo đồ thị",e.jsx("svg",{className:"w-2.5 h-2.5 ms-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 4 4 4-4"})})]}),e.jsx("div",{id:"dropdownNavbar1",className:`z-10 hidden font-normal bg-gray-700 divide-y \r
          divide-gray-100 rounded-lg shadow-sm w-30 divide-gray-600`,children:e.jsxs("ul",{className:"py-2 text-sm text-gray-400","aria-labelledby":"dropdownLargeButton",children:[e.jsx("li",{children:e.jsx(i,{to:"/vedothi",className:"block px-4 py-2 hover:bg-gray-600 hover:text-white",children:"Vẽ đồ thị"})}),e.jsx("li",{children:e.jsx(i,{to:"/nhapdothi",className:"block px-4 py-2 hover:bg-gray-600 hover:text-white",children:"Nhập đồ thị"})}),e.jsx("li",{children:e.jsx(i,{to:"/chuyendoi",className:"block px-4 py-2 hover:bg-gray-600 hover:text-white",children:"Chuyển đổi"})})]})})]}),e.jsxs("li",{children:[e.jsxs("button",{id:"dropdownNavbarLink2","data-dropdown-toggle":"dropdownNavbar2",className:`flex items-center justify-between w-full py-2 px-3 \r
          rounded-sm md:hover:bg-transparent\r
          md:border-0 md:p-0 md:w-auto \r
          focus:text-white border-gray-700 \r
          font-bold hover:bg-blue-700 navigation-checked bg-blue-700 md:bg-transparent`,children:["Phân tích đồ thị",e.jsx("svg",{className:"w-2.5 h-2.5 ms-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 4 4 4-4"})})]}),e.jsx("div",{id:"dropdownNavbar2",className:`z-10 hidden font-normal bg-gray-700 divide-y \r
          divide-gray-100 rounded-lg shadow-sm w-47 divide-gray-600`,children:e.jsxs("ul",{className:"py-2 text-sm text-gray-400","aria-labelledby":"dropdownLargeButton",children:[e.jsx("li",{children:e.jsx(i,{to:"/duyetdothi",className:"block px-4 py-2 hover:bg-gray-600 hover:text-white",children:"Duyệt đồ thị"})}),e.jsx("li",{children:e.jsx(i,{to:"/timlienthong",className:"block px-4 py-2 bg-gray-600 text-white",children:"Tìm liên thông"})}),e.jsx("li",{children:e.jsx(i,{to:"/duongdingannhat",className:"block px-4 py-2 hover:bg-gray-600 hover:text-white",children:"Tìm đường đi ngắn nhất"})}),e.jsx("li",{children:e.jsx(i,{to:"/xephangdothi",className:"block px-4 py-2 hover:bg-gray-600 hover:text-white",children:"Xếp hạng đồ thị"})}),e.jsx("li",{children:e.jsx(i,{to:"/caykhungnhonhat",className:"block px-4 py-2 hover:bg-gray-600 hover:text-white",children:"Cây khung nhỏ nhất"})}),e.jsx("li",{children:e.jsx(i,{to:"/timluongcucdai",className:"block px-4 py-2 hover:bg-gray-600 hover:text-white",children:"Tìm luồng cực đại trong mạng"})})]})})]}),e.jsx("li",{children:e.jsx(i,{to:"/tainguyenhoctap",className:`block py-2 px-3 \r
          rounded-sm hover:bg-gray-100 md:border-0 md:p-0 text-white hover:bg-gray-700 md:hover:bg-transparent font-bold navigation`,children:"Tài nguyên & Học tập"})}),e.jsx("li",{children:e.jsx(i,{to:"/vechungtoi",className:"block py-2 px-3 rounded-sm hover:bg-gray-100 md:border-0 md:p-0 text-white hover:bg-gray-700 md:hover:bg-transparent font-bold navigation",children:"Về chúng tôi"})})]})})]})})}),e.jsxs("main",{children:[e.jsxs("div",{className:"container",id:"formbox",children:[e.jsx("h2",{children:"Tìm các bộ phận liên thông"}),e.jsxs("form",{id:"graphForm",onSubmit:N,children:[e.jsxs("div",{className:"form-group",id:"munberNodes",children:[e.jsx("label",{htmlFor:"nodes",children:"Nhập số đỉnh:"}),e.jsx("input",{type:"number",id:"nodes",name:"nodes",min:"0",required:!0,value:w,onChange:g=>C(g.target.value)})]}),e.jsxs("div",{className:"listedges",children:[e.jsx("label",{htmlFor:"edges",children:"Nhập các cung:"}),e.jsx("textarea",{id:"edges",name:"edges",rows:"16",placeholder:`Ví dụ: 1 2 \r
       1 3\r
       2 4`,value:x,onChange:g=>f(g.target.value)})]}),e.jsx("div",{id:"graphOption",children:e.jsx("div",{className:"typeOfBrowe",children:e.jsx("div",{children:e.jsx("input",{type:"submit",id:"run",value:"Chạy",onClick:()=>y(1)})})})})]})]}),e.jsxs("div",{className:"graph-container container",children:[e.jsx("div",{id:"mynetwork"}),e.jsx("button",{id:"zoomExtendsButton",children:e.jsx("img",{src:R,alt:"",width:40})})]})]})]})]})};export{U as default};
