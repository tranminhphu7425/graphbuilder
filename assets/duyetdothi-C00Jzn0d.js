import{r as u,j as t}from"./index-CIuRjdGw.js";import{v as b,u as S,e as D}from"./extendable-CZ_ptkKR.js";import{C}from"./configfullpage-DdPJEFnB.js";import{i as k,H as B}from"./style-B0060oZX.js";import{N}from"./nhapdothi-1EiTXN5i.js";import"./vis-network-DvV5Ajkb.js";const F=()=>{u.useEffect(()=>{let f=null;document.getElementById("graphForm").addEventListener("submit",function(d){d.preventDefault();let i=parseInt(document.getElementById("nodes").value),a=document.getElementById("edges").value.trim(),o=document.getElementById("directed").checked,e=d.submitter.value;var n=parseInt(document.getElementById("startNode").value);let s=a.split(`
`).map(h=>h.trim().split(" ").map(Number)),l=y(s,o,i),c=x(l,i,e,n);j(c),p(c)});function y(d,i,a){let o=Array.from({length:a+1},()=>[]);for(let[e,n]of d){if(e<1||e>a||n<1||n>a){console.error(`Số nút không hợp lệ: u=${e}, v=${n}, numNodes=${a}`);continue}o[e].push(n),i||o[n].push(e)}for(let e=1;e<=a;e++)o[e].sort((n,s)=>n-s);return o}function x(d,i,a,o){let e=new Array(i+1).fill(!1),n=[],s=new Array(i+1).fill(0),l=0,c=0;function h(r,g){e[r]=!0,n.push({node:r,parent:g,order:++l}),s[r]=c;for(let m of d[r])e[m]||h(m,r)}function E(r){let g=[{node:r,parent:-1}];for(e[r]=!0,s[r]=c;g.length>0;){let{node:m,parent:w}=g.shift();n.push({node:m,parent:w,order:++l});for(let v of d[m])e[v]||(e[v]=!0,s[v]=c,g.push({node:v,parent:m}))}}a==="DFS"?h(o,-1):E(o);for(let r=1;r<=i;r++)e[r]||(c++,a==="DFS"?h(r,-1):E(r));return n.forEach(r=>r.component=s[r.node]),n}function j(d){let i=`Đỉnh | Cha | Thứ tự duyệt
`;i+=d.map(({node:a,parent:o,order:e})=>`${a} | ${o} | ${e}`).join(`
`),console.log(i)}function p(d){const i=["#ffa500","#ff7f50","#6495ed","#ff69b4","#bdd482"];let a=d.map(({node:l,order:c,component:h})=>({id:l,label:`${l} - ${c}`,color:i[h%i.length]})),o=d.filter(({parent:l})=>l!==-1).map(({node:l,parent:c})=>({from:c,to:l,arrows:"to"})),e=document.getElementById("mynetwork");e||(e=document.createElement("div"),e.id="mynetwork",e.style.height="500px",document.body.appendChild(e));let n={nodes:new b.DataSet(a),edges:new b.DataSet(o)},s={configure:{enabled:!1},nodes:{size:30,margin:50,font:{color:"#000000",size:30,align:"center"}},edges:{smooth:{type:"dynamic",roundness:.5},selfReferenceSize:20},interaction:{dragNodes:!0,hover:!0},physics:{enabled:!0,solver:"forceAtlas2Based",forceAtlas2Based:{springLength:200,springConstant:.02,centralGravity:.005,gravitationalConstant:-200},stabilization:{iterations:200},wind:{x:0,y:0}},layout:{hierarchical:{direction:"UD",sortMethod:"directed",shakeTowards:"roots"}}};f=new b.Network(e,n,s)}document.getElementById("zoomExtendsButton").addEventListener("click",function(){f.fit()})},[])},L=()=>{const[f,y]=u.useState(""),[x,j]=u.useState(""),[p,d]=u.useState(!1),[i,a]=u.useState("");var[o,e]=u.useState(0);u.useEffect(()=>{S(),C(),k()},[]),u.useEffect(()=>{N()},[]),u.useEffect(()=>{o===1&&(N(),e(0))},[f,x,p,i,o]);const n=s=>{s.preventDefault(),e(1)};return F(),t.jsxs(t.Fragment,{children:[t.jsx("title",{children:"Duyệt đồ thị"}),t.jsxs("div",{className:"fade-in",children:[t.jsx(B,{activePage:"duyetdothi",className:"bg-transparent"}),t.jsxs("main",{children:[t.jsxs("div",{className:"container",id:"formbox",children:[t.jsx("h2",{children:"Duyệt đồ thị"}),t.jsxs("form",{id:"graphForm",onSubmit:n,children:[t.jsxs("div",{className:"form-group",id:"munberNodes",children:[t.jsx("label",{htmlFor:"nodes",children:"Nhập số đỉnh:"}),t.jsx("input",{type:"number",id:"nodes",name:"nodes",min:"0",required:!0,value:f,onChange:s=>y(s.target.value)})]}),t.jsxs("div",{className:"listedges",children:[t.jsx("label",{htmlFor:"edges",children:"Nhập các cung:"}),t.jsx("textarea",{id:"edges",name:"edges",rows:"10",placeholder:`Ví dụ: 1 2 \r
       1 3\r
       2 4`,value:x,onChange:s=>j(s.target.value)})]}),t.jsxs("div",{id:"graphOption",children:[t.jsxs("label",{className:"switch",id:"isVector",children:["Có hướng",t.jsx("input",{type:"checkbox",id:"directed",name:"directed",checked:p,onChange:()=>d(!p)}),t.jsx("span",{className:"slider"})]}),t.jsxs("div",{className:"start",children:[t.jsx("label",{htmlFor:"startNode",children:"Đi từ đỉnh:"}),t.jsx("input",{type:"number",name:"startNode",id:"startNode",min:"0",value:i,onChange:s=>a(s.target.value)})]}),t.jsxs("div",{className:"typeOfBrowe",children:[t.jsx("p",{children:"Dựng cây duyệt đồ thị"}),t.jsxs("div",{children:[t.jsx("input",{type:"submit",value:"DFS",onClick:()=>e(1)}),t.jsx("input",{type:"submit",value:"BFS",onClick:()=>e(1)})]})]})]})]})]}),t.jsxs("div",{className:"graph-container container",children:[t.jsx("div",{id:"mynetwork"}),t.jsx("button",{id:"zoomExtendsButton",children:t.jsx("img",{src:D,alt:"",width:40})})]})]})]})]})};export{L as default};
