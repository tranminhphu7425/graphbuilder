import{r as h,j as t}from"./index-CIuRjdGw.js";import{v,u as w,e as E}from"./extendable-CZ_ptkKR.js";import{C as I}from"./configfullpage-DdPJEFnB.js";import{i as k,H as S}from"./style-B0060oZX.js";import{N}from"./nhapdothi-1EiTXN5i.js";import"./vis-network-DvV5Ajkb.js";const B=()=>{h.useEffect(()=>{let g=null;function j(o){o.preventDefault();const a=parseInt(document.getElementById("nodes").value),i=document.getElementById("edges").value,d=document.getElementById("directed").checked,s=parseInt(document.getElementById("startNode").value),n=i.split(`
`).map(l=>{const e=l.trim().split(" ").map(Number);return e.length===2?{from:e[0],to:e[1],weight:1}:e.length===3?{from:e[0],to:e[1],weight:e[2]}:null}).filter(l=>l!==null);var r=y(a,n,d);const{distances:u,previous:m}=x(r,s);p(a,u,m),b(a,n,d,m)}function p(o,a,i){const d=document.getElementById("result"),s=document.querySelector("#resultTable tbody");s.innerHTML="";for(let n=1;n<=o;n++){const r=document.createElement("tr");r.innerHTML=`
            <td>${n}</td>
            <td>${a[n]===1/0?"No path":a[n]}</td>
            <td>${i[n]!==null?i[n]:"-"}</td>
          `,s.appendChild(r)}d.style.display="block"}function y(o,a,i){const s=Array.from({length:o+1},()=>Array(o+1).fill(1/0));for(let n=1;n<=o;n++)s[n][n]=0;return a.forEach(({from:n,to:r,weight:u})=>{s[n][r]=u,i||(s[r][n]=u)}),s}function x(o,a){const i=o.length-1,d=1/0,s=new Array(i+1).fill(d),n=new Array(i+1).fill(!1),r=new Array(i+1).fill(null);s[a]=0,r[a]=-1;for(let u=1;u<i;u++){let m=d,l=-1;for(let e=1;e<=i;e++)!n[e]&&s[e]<m&&(m=s[e],l=e);if(l===-1)break;n[l]=!0;for(let e=1;e<=i;e++)if(o[l][e]!==d&&!n[e]){let c=s[l]+o[l][e];c<s[e]&&(s[e]=c,r[e]=l)}}return{distances:s,previous:r}}function b(o,a,i,d){const s=Array.from({length:o},(e,c)=>({id:c+1,label:`${c+1}`})),n=a.map(e=>({from:e.from,to:e.to,label:`${e.weight}`,arrows:i?"to":"",color:{color:"black"},width:1})),r=[];for(let e=1;e<=o;e++)d[e]!==null&&r.push({from:d[e],to:e});n.forEach(e=>{r.some(c=>c.from===e.from&&c.to===e.to||c.from===e.to&&c.to===e.from)&&(e.color={color:"red"},e.width=3)});const u=document.getElementById("mynetwork"),m={nodes:new v.DataSet(s),edges:new v.DataSet(n)},l={configure:{enabled:!1},nodes:{shape:"dot",color:"#bdd482",size:40,margin:10,font:{color:"#000000",size:40,vadjust:-80,align:"center"}},edges:{smooth:{type:"dynamic",roundness:.5},selfReferenceSize:20,length:void 0,font:{size:30,align:"horizontal"}},interaction:{dragNodes:!0,hover:!0},physics:{enabled:!0,solver:"forceAtlas2Based",forceAtlas2Based:{springLength:200,springConstant:.02,centralGravity:.005,gravitationalConstant:-80},stabilization:{iterations:200},wind:{x:0,y:0}}};g=new v.Network(u,m,l)}const f=document.getElementById("graphForm");f&&f.addEventListener("submit",j),document.getElementById("zoomExtendsButton").addEventListener("click",function(){g.fit()})},[])},G=()=>{const[g,j]=h.useState(""),[p,y]=h.useState(""),[x,b]=h.useState(!0),[f,o]=h.useState(!1),[a,i]=h.useState("");var[d,s]=h.useState(0);h.useEffect(()=>{w(),I(),k()},[]),h.useEffect(()=>{N()},[]),h.useEffect(()=>{d===1&&(N(),s(0))},[g,p,f,a,d]);const n=r=>{r.preventDefault(),s(1)};return B(),t.jsxs(t.Fragment,{children:[t.jsx("title",{children:"Đường đi ngắn nhất"}),t.jsxs("div",{className:"fade-in",children:[t.jsx(S,{activePage:"duongdingannhat",className:"bg-transparent"}),t.jsxs("main",{children:[t.jsxs("div",{className:"container",id:"formbox",children:[t.jsx("h2",{children:"Tìm đường ngắn nhất"}),t.jsxs("form",{id:"graphForm",onSubmit:n,children:[t.jsxs("div",{className:"form-group",id:"munberNodes",children:[t.jsx("label",{htmlFor:"nodes",children:"Nhập số đỉnh:"}),t.jsx("input",{type:"number",id:"nodes",name:"nodes",min:"0",required:!0,value:g,onChange:r=>j(r.target.value)})]}),t.jsxs("div",{className:"listedges",children:[t.jsx("label",{htmlFor:"edges",children:"Nhập các cung:"}),t.jsx("textarea",{id:"edges",name:"edges",rows:"12",placeholder:`Ví dụ: 1 2 3\r
       1 3 2\r
       2 4 5`,value:p,onChange:r=>y(r.target.value)})]}),t.jsxs("div",{id:"graphOption",children:[t.jsx("input",{type:"hidden",id:"isWeightedGraph",name:"isWeightedGraph",checked:x,onChange:()=>b(!x)}),t.jsxs("label",{className:"switch",children:["Có hướng",t.jsx("input",{type:"checkbox",id:"directed",name:"directed",checked:f,onChange:()=>o(!f)}),t.jsx("span",{className:"slider"})]}),t.jsxs("div",{className:"start",children:[t.jsx("label",{htmlFor:"startNode",children:"Đi từ đỉnh:"}),t.jsx("input",{type:"number",name:"startNode",id:"startNode",min:"0",value:a,onChange:r=>i(r.target.value)})]}),t.jsx("div",{className:"typeOfBrowe",children:t.jsx("div",{children:t.jsx("input",{type:"submit",id:"run",value:"Chạy",onClick:()=>s(1)})})})]})]})]}),t.jsxs("div",{className:"graph-container container",children:[t.jsx("div",{id:"mynetwork"}),t.jsx("button",{id:"zoomExtendsButton",children:t.jsx("img",{src:E,alt:"",width:40})})]}),t.jsxs("div",{id:"result",className:"container",children:[t.jsx("h2",{children:"Kết quả"}),t.jsxs("table",{border:"1",id:"resultTable",style:{width:"100%",textAlign:"center"},children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Đỉnh"}),t.jsx("th",{children:"Khoảng cách"}),t.jsx("th",{children:"Trước đó"})]})}),t.jsx("tbody",{})]})]})]})]})]})};export{G as default};
