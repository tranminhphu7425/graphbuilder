import{r as h,j as e}from"./index-CIuRjdGw.js";import{v as w,u as F,e as S}from"./extendable-CZ_ptkKR.js";import{C as A}from"./configfullpage-DdPJEFnB.js";import{i as I,H as z}from"./style-B0060oZX.js";import{N as k}from"./nhapdothi-1EiTXN5i.js";import"./vis-network-DvV5Ajkb.js";const G=()=>{h.useEffect(()=>{let f=null;function y(n){n.preventDefault();const r=parseInt(document.getElementById("nodes").value),o=document.getElementById("edges").value,s=1,l=r,a=o.split(`
`).map(i=>{const u=i.trim().split(" ").map(Number);return u.length===3?{from:u[0],to:u[1],capacity:u[2]}:null}).filter(i=>i!==null),{maxFlow:d,residualGraph:t}=b(r,a,s,l);g(d),x(r,a,t,s)}function g(n){const r=document.getElementById("result"),o=document.getElementById("resultText");o.textContent=`Luồng cực đại: ${n}`,r.style.display="block"}function j(n,r){const o=Array.from({length:n+1},()=>Array(n+1).fill(0));return r.forEach(({from:s,to:l,capacity:a})=>{o[s][l]=a}),o}function p(n,r,o,s){const l=new Array(n.length).fill(!1),a=[];for(a.push(r),l[r]=!0,s[r]=-1;a.length>0;){const d=a.shift();for(let t=1;t<n.length;t++)if(!l[t]&&n[d][t]>0&&(a.push(t),s[t]=d,l[t]=!0,t===o))return!0}return!1}function b(n,r,o,s){let l=j(n,r);const a=new Array(n+1).fill(-1);let d=0;for(;p(l,o,s,a);){let t=1/0;for(let i=s;i!==o;i=a[i]){const u=a[i];t=Math.min(t,l[u][i])}for(let i=s;i!==o;i=a[i]){const u=a[i];l[u][i]-=t,l[i][u]+=t}d+=t}return{maxFlow:d,residualGraph:l}}function x(n,r,o,s){const l=Array.from({length:n},(m,c)=>({id:c+1,label:`${c+1}`,color:{background:"gray"}})),a=r.map(m=>{const{from:c,to:E,capacity:N}=m,C=N-o[c][E];return{from:c,to:E,label:`${C} / ${N}`,arrows:"to",color:{color:"black"},width:1}}),d=new Array(n+1).fill(!1),t=[];for(t.push(s),d[s]=!0;t.length>0;){const m=t.shift();for(let c=1;c<=n;c++)!d[c]&&o[m][c]>0&&(d[c]=!0,t.push(c))}l.forEach(m=>{d[m.id]?m.color={background:"green"}:m.color={background:"red"}});const i=document.getElementById("mynetwork"),u={nodes:new w.DataSet(l),edges:new w.DataSet(a)},B={configure:{enabled:!1},nodes:{shape:"dot",size:40,margin:10,font:{color:"#000000",size:40,vadjust:-80,align:"center"}},edges:{smooth:{type:"dynamic",roundness:.5},selfReferenceSize:20,length:void 0,font:{size:30,align:"horizontal"}},interaction:{dragNodes:!0,hover:!0},physics:{enabled:!0,solver:"forceAtlas2Based",forceAtlas2Based:{springLength:200,springConstant:.02,centralGravity:.005,gravitationalConstant:-80},stabilization:{iterations:200},wind:{x:0,y:0}}};f=new w.Network(i,u,B)}const v=document.getElementById("graphForm");v&&v.addEventListener("submit",y),document.getElementById("zoomExtendsButton").addEventListener("click",function(){f.fit()})},[])},$=()=>{const[f,y]=h.useState(""),[g,j]=h.useState(""),[p,b]=h.useState(!0),[x,v]=h.useState(!0);var[n,r]=h.useState(0);h.useEffect(()=>{F(),A(),I()},[]),h.useEffect(()=>{k()},[]),h.useEffect(()=>{n===1&&(k(),r(0))},[f,g,n]);const o=s=>{s.preventDefault(),r(1)};return G(),e.jsxs(e.Fragment,{children:[e.jsx("title",{children:"Tìm luồng cực đại trong mạng"}),e.jsxs("div",{className:"fade-in",children:[e.jsx(z,{activePage:"timluongcucdai",className:"bg-transparent"}),e.jsxs("main",{children:[e.jsxs("div",{className:"container",id:"formbox",children:[e.jsx("h2",{children:"Tìm luồng cực đại trong mạng"}),e.jsxs("form",{id:"graphForm",onSubmit:o,children:[e.jsxs("div",{className:"form-group",id:"munberNodes",children:[e.jsx("label",{htmlFor:"nodes",children:"Nhập số đỉnh:"}),e.jsx("input",{type:"number",id:"nodes",name:"nodes",min:"0",required:!0,value:f,onChange:s=>y(s.target.value)})]}),e.jsxs("div",{className:"listedges",children:[e.jsx("label",{htmlFor:"edges",children:"Nhập các cung:"}),e.jsx("textarea",{id:"edges",name:"edges",rows:"12",placeholder:`Ví dụ: 1 2 3\r
       1 3 2\r
       2 4 5`,value:g,onChange:s=>j(s.target.value)})]}),e.jsxs("div",{id:"graphOption",children:[e.jsx("input",{type:"hidden",id:"isWeightedGraph",name:"isWeightedGraph",checked:p,onChange:()=>b(!p)}),e.jsx("label",{className:"switch m-0",children:e.jsx("input",{type:"hidden",id:"directed",name:"directed",checked:x,onChange:()=>v(!x)})}),e.jsx("div",{className:"typeOfBrowe",children:e.jsx("div",{children:e.jsx("input",{type:"submit",id:"run",value:"Chạy",onClick:()=>r(1)})})})]})]})]}),e.jsxs("div",{className:"graph-container container",children:[e.jsx("div",{id:"mynetwork"}),e.jsx("button",{id:"zoomExtendsButton",children:e.jsx("img",{src:S,alt:"",width:40})})]}),e.jsxs("div",{id:"result",className:"container",children:[e.jsx("h2",{children:"Kết quả"}),e.jsx("div",{id:"resultText"})]})]})]})]})};export{$ as default};
