import{r as p,j as n}from"./index-CIuRjdGw.js";import{v as E,u as T,e as W}from"./extendable-CZ_ptkKR.js";import{C as G}from"./configfullpage-DdPJEFnB.js";import{i as H,H as O}from"./style-B0060oZX.js";import{N as D}from"./nhapdothi-1EiTXN5i.js";import"./vis-network-DvV5Ajkb.js";const q=()=>{p.useEffect(()=>{let x=null;document.getElementById("graphForm").addEventListener("submit",function(N){N.preventDefault();const v=document.getElementById("nodes").value,S=document.getElementById("edges").value.trim(),h=parseInt(v)||0,g=S?S.split(`
`):[];let j=new E.DataSet,l=new E.DataSet;const z=j.getIds();for(let o=1;o<=h;o++)z.includes(o)||j.add({id:o,label:o.toString(),size:40,font:{size:40,vadjust:-80}});l.clear();const b={};g.forEach(o=>{const s=o.split(" "),e=parseInt(s[0]),a=parseInt(s[1]),f=s.length===3?s[2]:null;if(!isNaN(e)&&!isNaN(a)){const i=e===a;if(i){b[e]=(b[e]||0)+1;const r=b[e];if(r>=6&&e<=h){const c=35+(r-5)*5,C=40+(r-5)*5,d=-80-(r-5)*10;j.update({id:e,size:c,font:{size:C,vadjust:d}})}}const u=Math.random()>.5?"curvedCCW":"curvedCW",w=Math.random()*.5+.2,t={from:e,to:a,arrows:"to",smooth:i?{type:u,roundness:w}:!0,selfReferenceSize:i?20+(b[e]-1)*10:void 0};f!==null&&(t.label=f.toString(),t.font={size:30,align:"horizontal"},t.color={color:"#373b37"}),l.add(t)}}),z.forEach(o=>{if(o>h)try{j.remove({id:o})}catch(s){console.error(`Error removing node ${o}:`,s)}});class B{constructor(s){this.V=s+1,this.adj=new Map;for(let e=1;e<=s;e++)this.adj.set(e,[])}addEdge(s,e){this.adj.get(s).push(e)}tarjan(){const s=new Array(this.V).fill(-1),e=new Array(this.V).fill(-1),a=new Array(this.V).fill(!1),f=[],i=[];let u=0;const w=t=>{s[t]=u,e[t]=u,u++,f.push(t),a[t]=!0;for(const r of this.adj.get(t))s[r]===-1?(w(r),e[t]=Math.min(e[t],e[r])):a[r]&&(e[t]=Math.min(e[t],s[r]));if(e[t]===s[t]){const r=[];let c;do c=f.pop(),a[c]=!1,r.push(c);while(c!==t);i.push(r)}};for(let t=1;t<this.V;t++)s[t]===-1&&w(t);return i}}function k(o,s,e=!0){const a=new E.DataSet,f=new E.DataSet,i={},u=["#ffa500","#ff7f50","#6495ed","#ff69b4","#bdd482"];o.forEach((c,C)=>{c.forEach(d=>{a.add({id:d,label:d.toString(),color:u[(C-1)%u.length],size:40,font:{color:"#000000",size:40,vadjust:-80}})}),c.forEach(d=>{s.forEach(m=>{if(m.from===d&&c.includes(m.to))if(m.from===m.to){i[d]=(i[d]||0)+1;const y=i[d];if(y>=6){const V=40+(y-5)*5,A=40+(y-5)*5,R=-80-(y-5)*10;a.update({id:d,size:V,font:{size:A,vadjust:R}})}const L=Math.random()>.5?"curvedCCW":"curvedCW",M=Math.random()*.5+.2;f.add({from:m.from,to:m.to,arrows:e?"to":"",smooth:{type:L,roundness:M},selfReferenceSize:20+(i[d]-1)*10})}else f.add(m)})})});const w=document.getElementById("mynetwork"),t={nodes:a,edges:f},r={configure:{enabled:!1},nodes:{shape:"dot",color:"#bdd482",margin:10},edges:{smooth:{type:"dynamic",roundness:.5},selfReferenceSize:20},interaction:{dragNodes:!0,hover:!0},physics:{enabled:!0,solver:"forceAtlas2Based",forceAtlas2Based:{springLength:150,springConstant:.02,centralGravity:.005,gravitationalConstant:-80},stabilization:{iterations:200},wind:{x:0,y:0}}};x=new E.Network(w,t,r)}const I=new B(h);g.forEach(o=>{const[s,e]=o.split(" ").map(Number);I.addEdge(s,e)});const F=I.tarjan();k(F,l)}),document.getElementById("zoomExtendsButton").addEventListener("click",function(){x.fit()})},[])},Y=()=>{const[x,N]=p.useState(""),[v,S]=p.useState("");var[h,g]=p.useState(0);p.useEffect(()=>{T(),G(),H()},[]),p.useEffect(()=>{D()},[]),p.useEffect(()=>{h===1&&(D(),g(0))},[x,v,h]);const j=l=>{l.preventDefault(),g(1)};return q(),n.jsxs(n.Fragment,{children:[n.jsx("title",{children:"Tìm liên thông mạnh"}),n.jsxs("div",{className:"fade-in",children:[n.jsx(O,{activePage:"timlienthong",className:"bg-transparent"}),n.jsxs("main",{children:[n.jsxs("div",{className:"container",id:"formbox",children:[n.jsx("h2",{children:"Tìm các bộ phận liên thông"}),n.jsxs("form",{id:"graphForm",onSubmit:j,children:[n.jsxs("div",{className:"form-group",id:"munberNodes",children:[n.jsx("label",{htmlFor:"nodes",children:"Nhập số đỉnh:"}),n.jsx("input",{type:"number",id:"nodes",name:"nodes",min:"0",required:!0,value:x,onChange:l=>N(l.target.value)})]}),n.jsxs("div",{className:"listedges",children:[n.jsx("label",{htmlFor:"edges",children:"Nhập các cung:"}),n.jsx("textarea",{id:"edges",name:"edges",rows:"16",placeholder:`Ví dụ: 1 2 \r
       1 3\r
       2 4`,value:v,onChange:l=>S(l.target.value)})]}),n.jsx("div",{id:"graphOption",children:n.jsx("div",{className:"typeOfBrowe",children:n.jsx("div",{children:n.jsx("input",{type:"submit",id:"run",value:"Chạy",onClick:()=>g(1)})})})})]})]}),n.jsxs("div",{className:"graph-container container",children:[n.jsx("div",{id:"mynetwork"}),n.jsx("button",{id:"zoomExtendsButton",children:n.jsx("img",{src:W,alt:"",width:40})})]})]})]})]})};export{Y as default};
