import{r as c,j as t}from"./index-CIuRjdGw.js";import{v,u as j,e as y}from"./extendable-CZ_ptkKR.js";import{C as b}from"./configfullpage-DdPJEFnB.js";import{i as E,H as w}from"./style-B0060oZX.js";import{N as x}from"./nhapdothi-1EiTXN5i.js";import"./vis-network-DvV5Ajkb.js";const k=()=>{c.useEffect(()=>{let f=null;document.getElementById("graphForm").addEventListener("submit",function(o){o.preventDefault();let i=parseInt(document.getElementById("nodes").value),e=document.getElementById("edges").value.trim(),a=!0,s=e.split(`
`).map(u=>u.trim().split(" ").map(Number)),r=p(s,a,i),d=h(r,i);g(d),m(d,s)});function p(o,i,e){let a=Array.from({length:e+1},()=>[]);for(let[s,r]of o){if(s<1||s>e||r<1||r>e){console.error(`Số nút không hợp lệ: u=${s}, v=${r}, numNodes=${e}`);continue}a[s].push(r)}for(let s=1;s<=e;s++)a[s].sort((r,d)=>r-d);return a}function h(o,i){let e=new Array(i+1).fill(0),a=new Array(i+1).fill(0);for(let n=1;n<=i;n++)for(let l of o[n])e[l]++;let s=[],r=[];for(let n=1;n<=i;n++)e[n]===0&&s.push(n);let d=0;for(;s.length>0;){r=[];for(let n of s){a[n]=d;for(let l of o[n])e[l]--,e[l]===0&&r.push(l)}s=r,d++}let u=[];for(let n=1;n<=i;n++)u.push({node:n,rank:a[n]});return u}function g(o){let i=`Đỉnh | Hạng
`;i+=o.map(({node:e,rank:a})=>`${e} | ${a}`).join(`
`),console.log(i)}function m(o,i){const e=["#ffa500","#ff7f50","#6495ed","#ff69b4","#bdd482"];let a=o.map(({node:n,rank:l})=>({id:n,label:`${n} - ${l}`,color:e[l%e.length]})),s=i.map(([n,l])=>({from:n,to:l,arrows:"to"})),r=document.getElementById("mynetwork");r||(r=document.createElement("div"),r.id="mynetwork",r.style.height="500px",document.body.appendChild(r));let d={nodes:new v.DataSet(a),edges:new v.DataSet(s)},u={configure:{enabled:!1},nodes:{size:30,margin:50,font:{color:"#000000",size:30,align:"center"}},edges:{smooth:{type:"dynamic",roundness:.5},selfReferenceSize:20},interaction:{dragNodes:!0,hover:!0},physics:{enabled:!1,solver:"forceAtlas2Based",forceAtlas2Based:{springLength:200,springConstant:.02,centralGravity:.005,gravitationalConstant:-200},stabilization:{iterations:200},wind:{x:0,y:0}},layout:{hierarchical:{direction:"LR",sortMethod:"directed",shakeTowards:"roots"}}};f=new v.Network(r,d,u)}document.getElementById("zoomExtendsButton").addEventListener("click",function(){f.fit()})},[])},$=()=>{const[f,p]=c.useState(""),[h,g]=c.useState("");var[m,o]=c.useState(0);c.useEffect(()=>{j(),b(),E()},[]),c.useEffect(()=>{x()},[]),c.useEffect(()=>{m===1&&(x(),o(0))},[f,h,m]);const i=e=>{e.preventDefault(),o(1)};return k(),t.jsxs(t.Fragment,{children:[t.jsx("title",{children:"Xếp hạng đồ thị"}),t.jsxs("div",{className:"fade-in",children:[t.jsx(w,{activePage:"xephangdothi",className:"bg-transparent"}),t.jsxs("main",{children:[t.jsxs("div",{className:"container",id:"formbox",children:[t.jsx("h2",{children:"Xếp hạng đồ thị"}),t.jsxs("form",{id:"graphForm",onSubmit:i,children:[t.jsxs("div",{className:"form-group",id:"munberNodes",children:[t.jsx("label",{htmlFor:"nodes",children:"Nhập số đỉnh:"}),t.jsx("input",{type:"number",id:"nodes",name:"nodes",min:"0",required:!0,value:f,onChange:e=>p(e.target.value)})]}),t.jsxs("div",{className:"listedges",children:[t.jsx("label",{htmlFor:"edges",children:"Nhập các cung:"}),t.jsx("textarea",{id:"edges",name:"edges",rows:"10",placeholder:`Ví dụ: 1 2 \r
       1 3\r
       2 4`,value:h,onChange:e=>g(e.target.value)})]}),t.jsx("div",{id:"graphOption",children:t.jsx("div",{className:"typeOfBrowe",children:t.jsx("div",{children:t.jsx("input",{type:"submit",id:"run",value:"Chạy",onClick:()=>o(1)})})})})]})]}),t.jsxs("div",{className:"graph-container container",children:[t.jsx("div",{id:"mynetwork"}),t.jsx("button",{id:"zoomExtendsButton",children:t.jsx("img",{src:y,alt:"",width:40})})]})]})]})]})};export{$ as default};
